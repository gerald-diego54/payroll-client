import MainNavbar from "@/src/layout/MainNavbar";
import Sidebar from "@/src/layout/Sidebar";
import { Box, CssBaseline, Paper, SelectChangeEvent, styled, Typography } from "@mui/material";
import DashboardIcon from "@mui/icons-material/Dashboard";
import { NextPage } from "next";
import Head from "next/head";
import React from "react";
import Employee from "@/src/components/dashboard/Employee";
import Bargraph from "@/src/components/charts/bargraph";
import Data from "../data/chart_data.json";
import Piechart from "@/src/components/charts/piechart";
import { relative } from "path";

const DashboardPage: NextPage = () => {
    const [open, setOpen] = React.useState(true);
    const [OtNumber, setOtNumber] = React.useState("");
    const handleChange = (event: SelectChangeEvent) => {
        setOtNumber(event.target.value);
    };

    const Main = styled("main", { shouldForwardProp: (prop) => prop !== "open" })<{
        open?: boolean;
    }>(({ theme, open }) => ({
        flexGrow: 1,
        padding: theme.spacing(3),
        transition: theme.transitions.create(["margin", "width"], {
            easing: theme.transitions.easing.sharp,
            duration: theme.transitions.duration.leavingScreen,
        }),
        ...(open && {
            width: !open ? "100%" : "82%",
            marginLeft: "18%",
            position: "relative",
            transition: theme.transitions.create(["margin", "width"], {
                easing: theme.transitions.easing.easeOut,
                duration: theme.transitions.duration.enteringScreen,
            }),
        }),
    }));

    const data = {
        datasets: [
            {
                data: Data[0].data,
                backgroundColor: ["#EAF6ED", "#67C587"],
                borderColor: ["#EAF6ED", "#67C587"],
            },
        ],
        labels: Data[0].labels,
    };

    const options = {
        maintainAspectRatio: false,
        plugins: {
            datalabels: {
                display: true,
                anchor: "end",
                align: "start",
                offset: -30,
            },
            legend: {
                display: false,
                position: "bottom",
            },
        },
        scales: {
            y: {
                ticks: {
                    display: false,
                    beginAtZero: true,
                },

                grid: {
                    drawBorder: false,
                    display: false,
                },
            },
        },
    };

    return (
        <Box>
            <Head>
                <title>Create Next App</title>
                <meta name="description" content="Generated by create next app" />
                <meta name="viewport" content="width=device-width, initial-scale=1" />
                <link rel="icon" href="/favicon.ico" />
            </Head>
            <Box
                sx={{
                    backgroundColor: "#5B848D",
                    width: "100%",
                    height: "100vh",
                    display: "flex",
                    flexDirection: "row",
                }}
            >
                <CssBaseline />
                <Sidebar isOpen={open} />
                <Box sx={{ width: "100%" }}>
                    <Paper
                        sx={{
                            backgroundColor: "#ffffff",
                            width: "100%",
                            padding: "7px 10px",
                            display: "flex",
                            flexDirection: "row",
                            gap: 1,
                            paddingLeft: 2.9,
                            border: "none",
                        }}
                        square
                        elevation={4}
                    >
                        <DashboardIcon sx={{ color: "#044453", margin: "auto 0", fontSize: 35 }} />
                        <Typography color="#044453" variant="h6" fontWeight={600} my="auto">
                            Dashboard
                        </Typography>
                    </Paper>
                    <Paper
                        elevation={0}
                        sx={{
                            backgroundColor: "transparent",
                            width: "100%",
                            marginBottom: 2.5,
                        }}
                    >
                        <Box
                            sx={{
                                margin: "20px auto",
                                width: "fit-content",
                                display: "grid",
                                gridTemplateColumns: "auto auto auto",
                                gap: 3,
                            }}
                        >
                            <Bargraph title={"Test Graph"} data={data} options={options} />
                            <Piechart title={"Test Graph"} data={data} options={options} />
                            <Bargraph title={"Test Graph"} data={data} options={options} />
                        </Box>
                    </Paper>
                </Box>
            </Box>
        </Box>
    );
};

export default DashboardPage;
